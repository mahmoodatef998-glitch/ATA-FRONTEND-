# ๐ค ุชุญุณููุงุช ุงูุดุงุช ุจูุช - ุงููุบุฉ ุงูุนุฑุจูุฉ ูุงูุฃุฏุงุก

## โ ุงูุชุญุณููุงุช ุงููุทุจูุฉ

### 1. ุฅุตูุงุญ ูุดุงูู ุงููุบุฉ ุงูุนุฑุจูุฉ

#### ุฃ. ุชุญุณูู System Prompt:
- โ ุฅุถุงูุฉ ุชุนูููุงุช ูุงุถุญุฉ ููู AI ููุชุนุงูู ูุน ุงููุบุฉ ุงูุนุฑุจูุฉ
- โ ุงูุชุฃููุฏ ุนูู ุงูุฑุฏ ุจููุณ ูุบุฉ ุงููุณุชุฎุฏู
- โ ููุน ุงุณุชุฎุฏุงู ุฑููุฒ ุฎุงุตุฉ ูุฏ ุชุณุจุจ ูุดุงูู encoding
- โ ุงูุชุฃููุฏ ุนูู ุงุณุชุฎุฏุงู UTF-8 encoding

#### ุจ. ูุนุงูุฌุฉ Response:
- โ ุฅุฒุงูุฉ control characters ุงูุชู ูุฏ ุชุณุจุจ ูุดุงูู
- โ ุฅุฒุงูุฉ BOM (Byte Order Mark)
- โ ุงูุชุญูู ูู ุตุญุฉ UTF-8 encoding
- โ ุชูุธูู ุงููุต ูู ุงูุฑููุฒ ุบูุฑ ุงููููููุฉ

#### ุฌ. Frontend Processing:
- โ ูุนุงูุฌุฉ ุงูู response ูู Frontend ุฃูุถุงู
- โ ุชูุธูู ุงููุต ูุจู ุนุฑุถู
- โ ุงูุชุญูู ูู encoding ูู Client-side

---

### 2. ุชุญุณููุงุช ุงูุฃุฏุงุก

#### ุฃ. Timeout Handling:
- โ ุฅุถุงูุฉ timeout ููู requests (30 ุซุงููุฉ)
- โ ูุนุงูุฌุฉ ุฃูุถู ููุฃุฎุทุงุก ุนูุฏ timeout
- โ ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ูููุณุชุฎุฏู

#### ุจ. ุชุญุณูู Token Usage:
- โ ุชูููู ุนุฏุฏ ุงูุฑุณุงุฆู ูู ุงูู history (ูู 10 ุฅูู 8)
- โ ุชุญุฏูุฏ ุทูู ุงูุฑุณุงุฆู ูู ุงูู history (500 ุญุฑู)
- โ ุฒูุงุฏุฉ max_tokens ุฅูู 1500 ููุญุตูู ุนูู ุฑุฏูุฏ ุฃูุซุฑ ุชูุตููุงู

#### ุฌ. Error Handling:
- โ ูุนุงูุฌุฉ ุฃูุถู ููุฃุฎุทุงุก
- โ ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ
- โ Logging ุฃูุถู ููุฃุฎุทุงุก

---

## ๐ ุงูุชุบููุฑุงุช ูู ุงูููุฏ

### `app/api/chat/route.ts`:

1. **System Prompt:**
   - ุฅุถุงูุฉ ุชุนูููุงุช ูุงุถุญุฉ ููุบุฉ ุงูุนุฑุจูุฉ
   - ุงูุชุฃููุฏ ุนูู UTF-8 encoding
   - ููุน ุงุณุชุฎุฏุงู ุฑููุฒ ุฎุงุตุฉ

2. **Response Sanitization:**
   - ุฅุฒุงูุฉ control characters
   - ุฅุฒุงูุฉ BOM
   - ุงูุชุญูู ูู UTF-8 encoding

3. **Timeout:**
   - ุฅุถุงูุฉ 30 ุซุงููุฉ timeout
   - ูุนุงูุฌุฉ AbortError

4. **Token Optimization:**
   - ุชูููู history messages
   - ุชุญุฏูุฏ ุทูู ุงูุฑุณุงุฆู

### `components/chat/chatbot.tsx`:

1. **Response Processing:**
   - ูุนุงูุฌุฉ ุงูู response ูู text ุฃููุงู
   - ุชูุธูู ุงููุต ูุจู ุนุฑุถู
   - ุงูุชุญูู ูู encoding

2. **Timeout:**
   - ุฅุถุงูุฉ 35 ุซุงููุฉ timeout ูู Frontend
   - ูุนุงูุฌุฉ ุฃูุถู ููุฃุฎุทุงุก

---

## ๐ฏ ุงููุชุงุฆุฌ ุงููุชููุนุฉ

### ุงููุบุฉ ุงูุนุฑุจูุฉ:
- โ ูุง ูุฒูุฏ ูู ุงูุฑููุฒ ุบูุฑ ุงููููููุฉ
- โ ูุต ุนุฑุจู ูุงุถุญ ูููุฑูุก
- โ encoding ุตุญูุญ (UTF-8)
- โ ูุง ูุดุงูู ูู ุงูุนุฑุถ

### ุงูุฃุฏุงุก:
- โ ุงุณุชุฌุงุจุฉ ุฃุณุฑุน
- โ ุงุณุชุฎุฏุงู ุฃูู ููู tokens
- โ ูุนุงูุฌุฉ ุฃูุถู ููุฃุฎุทุงุก
- โ timeout ูุงุถุญ

---

## ๐งช ููููุฉ ุงูุงุฎุชุจุงุฑ

1. **ุงุฎุชุจุงุฑ ุงููุบุฉ ุงูุนุฑุจูุฉ:**
   - ุงูุชุจ ุฑุณุงูุฉ ุจุงูุนุฑุจูุฉ
   - ุชุญูู ูู ุฃู ุงูุฑุฏ ุจุงูุนุฑุจูุฉ
   - ุชุญูู ูู ุนุฏู ูุฌูุฏ ุฑููุฒ ุบุฑูุจุฉ

2. **ุงุฎุชุจุงุฑ ุงูุฃุฏุงุก:**
   - ุฌุฑุจ ุฑุณุงูุฉ ุทูููุฉ
   - ุชุญูู ูู ุณุฑุนุฉ ุงูุฑุฏ
   - ุชุญูู ูู ุนุฏู ูุฌูุฏ timeout

3. **ุงุฎุชุจุงุฑ ุงูุฃุฎุทุงุก:**
   - ุฌุฑุจ ูุทุน ุงูุงุชุตุงู
   - ุชุญูู ูู ุฑุณุงุฆู ุงูุฎุทุฃ
   - ุชุญูู ูู ูุนุงูุฌุฉ timeout

---

## ๐ ููุงุญุธุงุช

1. **Encoding:** ุฌููุน ุงููุตูุต ุงูุขู ุชุณุชุฎุฏู UTF-8 encoding
2. **Timeout:** 30 ุซุงููุฉ ููู APIุ 35 ุซุงููุฉ ููู Frontend
3. **History:** ุขุฎุฑ 8 ุฑุณุงุฆู ููุท (ุจุฏูุงู ูู 10)
4. **Max Tokens:** 1500 (ุจุฏูุงู ูู 1000)

---

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ (ุงุฎุชูุงุฑู)

1. ุฅุถุงูุฉ caching ููู responses ุงููุชูุฑุฑุฉ
2. ุฅุถุงูุฉ streaming ููู responses ุงูุทูููุฉ
3. ุฅุถุงูุฉ rate limiting
4. ุฅุถุงูุฉ analytics ููู chatbot usage

---

## โ ุงูุญุงูุฉ

- โ ุฅุตูุงุญ ูุดุงูู ุงููุบุฉ ุงูุนุฑุจูุฉ
- โ ุชุญุณูู ุงูุฃุฏุงุก
- โ ูุนุงูุฌุฉ ุฃูุถู ููุฃุฎุทุงุก
- โ ุฌุงูุฒ ููุงุฎุชุจุงุฑ

